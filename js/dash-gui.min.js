var DIRECTIONS=4;!function(a){"use strict";a.DashGUI=function(a,b,c,d){var e=this;d=d?d:700;var f=[],g=1,h=a.panels.length;e.direction=null;var i=0,j=-1;void 0!==b.base_index&&(i=b.base_index);for(var k,l=0;l<a.panels.length;l++)a.panels[l]=$(a.panels[l]);for(var l=0;l<a.icons.length;l++)a.icons[l]=$(a.icons[l]);for(var l in a.score)a.score[l]=$(a.score[l]);var m=function(){var a;do a=~~(Math.random()*b.presets);while(f.has(a));return f.push(a),f.length>=b.presets/2&&f.shift(),a};e.getPanels=function(){return a.panels};var n=function(a,c){var d={addClass:!1,class_name:a};return"+"===a.charAt(0)&&(d.addClass=!0,a=a.substr(1)),void 0!==c&&(a=a.replace(/\*/g,c),void 0!==b.replace_array[c]&&(a=a.replace(/\./g,b.replace_array[c]))),d.class_name=a,d},o=function(a,b,c){b?a.addClass(c):a.removeClass().addClass(c)},p=function(a,b,c){var d=n(b,c);o(a,d.addClass,d.class_name)};e.retrieve=function(f,l,n){e.direction=f;var o=m(),q=l.length,r=a.panels,s=mod(g+1,h);r[s].css("z-index",i),r[g].css("z-index",i+1);var t=a.icons[s];p(r[s],b.panel,o),p(t,b.icon,f);for(var u=0;q>u;u++)if(l[u]in c){var v=c[l[u]];v.panel&&p(r[s],v.panel,o),v.icon&&p(t,v.icon,f)}if(p(a.score.timer,b.timer_color,o),-1===j){var w=~~(Math.random()*DIRECTIONS),x=k[w];r[s].css({left:x.x,top:x.y}),r[s].animate({left:0,top:0},d,n)}else{var x=k[j];r[s].css({left:0,top:0}),r[g].animate({left:x.x,top:x.y},d,n)}j=f,g=s},e.prepare=function(){var c=$(window).width()+10,d=$(window).height()+10;k=[{x:"-"+c+"px",y:"0"},{x:"0",y:"-"+d+"px"},{x:c+"px",y:"0"},{x:"0",y:d+"px"}],a.score.main.css("z-index",2*(i+1)),a.score.timer.css("z-index",2*(i+1)),a.score.timer.parent().fadeIn(),a.score.points.html(0),a.score.main.fadeIn();for(var e=0;e<a.panels.length;e++)a.panels[e].css({top:"-100%",left:"-100%",display:"block"});a.score.timer.css("width",0);var f=n(b.life_lost);a.score.lives.removeClass(f.class_name)},e.dismiss=function(){for(var b=0;b<a.panels.length;b++)a.panels[b].fadeOut();a.score.main.fadeOut(),a.score.timer.parent().fadeOut()},e.fails=function(c){c--,p(a.icons[g],b.wrong_icon,e.direction),void 0!==a.score.lives.eq(c)&&p(a.score.lives.eq(c),b.life_lost)},e.scores=function(c){a.score.points.html(c),p(a.icons[g],b.correct_icon,e.direction)},e.tic=function(b){"block"===a.score.timer.parent().css("display")&&a.score.timer.animate({width:"100%"},b)},e.toc=function(){a.score.timer.stop().css("width",0)},e.hide_timer=function(){e.toc(),a.score.timer.parent().fadeOut()}}}(window);