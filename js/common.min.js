function toggleFullScreen(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function achievement(){msg_icon.removeClass().addClass("icon-trophy"),msg.fadeIn(),setTimeout(function(){msg.fadeOut()},1500)}var W,H,SITE=escape("http://dash.breno.io/"),listener=new window.keypress.Listener,msg=null,msg_icon=null,game=null,end_game_view=null,last_score=null,last_time=null,konami=!1,best=0,BEST_SCORE=0,tic=0,shares={fb:null,tw:null},times={press_time:1e3,step:0},konami_lives=42,challenges=[{morph:function(a){return{expected:[a.expected[0]]}}},{constraints:[3,4],rounds:45,morph:function(a){for(var c=a.expected.length,d={expected:[]},e=0;c>e;e++)d.expected.push(mod(a.expected[e]+2,4));return d}},{constraints:[3,4],rounds:25,morph:function(a){return{expected:[a.expected[0],a.expected[0]]}}},{constraints:[1,2,4],rounds:40,morph:function(a,b){return{expected:b.expected,missable:b.missable}}},{first_turn:!1,constraints:[1,2,3],rounds:60,morph:function(){return{expected:[],missable:!1}}}];listener.sequence_combo("up up down down left right left right b a enter",function(){konami^=!0,msg_icon.removeClass().addClass("icon-joystick"),msg.fadeIn(),setTimeout(function(){msg.fadeOut()},1500)}),$(document).ready(function(){$("#btn_howto").click(function(){$("#info").fadeIn()}),$(".dismiss").click(function(){$(this).parent().fadeOut()}),W=$(window).width(),H=$(window).height(),msg=$("#msg"),msg_icon=$("#msg_icon"),end_game_view=$("#end_game_view"),best=$("#best"),last_score=$("#last_score"),last_time=$("#last_time"),shares.fb=$("#fb_share_score"),shares.tw=$("#tw_share_score"),$("#btn_full").click(toggleFullScreen),$(".gp").click(function(){var a=~~((W-600)/2),b=~~((H-600)/2);window.open("https://plus.google.com/share?url="+SITE,"Dash","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600,left="+a+",top="+b)}),void 0===$.cookie("best")&&$.cookie("best","0",{expires:365}),null===window.localStorage.getItem("best")&&window.localStorage.setItem("best",0),BEST_SCORE=$.cookie("best")||window.localStorage.getItem("best"),best.html(BEST_SCORE),$("#fb_share").click(function(){FB.ui({name:"Dash",method:"share",href:"http://dash.breno.io/",caption:"How fast can you dash?",app_id:"903632352992329"},function(){})}),Interface=new DashGUI({panels:["#panel-0","#panel-1"],icons:["#panel-0 i","#panel-1 i"],score:{main:"#score",timer:"#gauge",lives:".lives div",points:"#counter"}},{base_index:1e3,presets:8,panel:"preset-*",icon:"icon-angle-.",wrong_icon:"icon-cancel",life_lost:"+lost",correct_icon:"+correct",replace_array:["left","up","right","down"]},{1:{panel:"reverse-*"},2:{icon:"icon-angle-double-."},3:{icon:"icon-cw"},4:{icon:"+pressed"}});var a={before_game:function(){},after_game:function(a){var b=(new Date).getTime(),c=~~((b-tic)/1e3);last_time.html(c),last_score.html(a);var d="I've made "+a+" points in Dash! Can you dash faster? #Dash_it";d=escape(d),shares.tw.attr("href","https://twitter.com/intent/tweet?text="+d+"&url="+SITE),shares.fb.click(function(){FB.ui({name:"Dash",method:"share",caption:unescape(d),href:"http://dash.breno.io/",app_id:"903632352992329"},function(){})}),end_game_view.fadeIn(),a>BEST_SCORE&&($.cookie("best",a,{expires:365}),window.localStorage.setItem("best",a),BEST_SCORE=a,best.html(BEST_SCORE))},best_score:function(){achievement()},lost_life:function(){},got_point:function(){},key_pressed:function(){}};game=new Dash(Interface,a,times).init(),$("#btn_play").click(function(){game.prepare(konami?konami_lives:3,BEST_SCORE,challenges),tic=(new Date).getTime(),game.start()}),$("#btn_again").click(function(){game.prepare(konami?konami_lives:3,BEST_SCORE,challenges),tic=(new Date).getTime(),game.start(),end_game_view.fadeOut()})});