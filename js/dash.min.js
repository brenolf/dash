!function(a){"use strict";a.Dash=function(a,b,c,d){function p(a){if(void 0===a)return o=[],void 0;o.push(a);var b=o.length,c=f.expected.length;return 0===c?o:(b>c&&o.shift(),b===c?o:c>b?null:void 0)}function q(a){var b={65:0,87:1,68:2,83:3};return a>=37&&40>=a?a-37:void 0!==b[a]?b[a]:-1}function r(){return b.lost_life(h-1),a.toc(),a.fails(h),clearTimeout(k),0===--h?t():(e.start(),void 0)}function s(){g++,b.got_point(g),a.toc(),a.scores(g),g>i&&!j&&(b.best_score(g),j=!0),clearTimeout(k),e.start()}function t(){a.dismiss(),clearTimeout(k),m=!1,b.after_game(g)}function u(a){for(var b=["left","up","right","down"],c=0;4>c&&!(a.indexOf(b[c])>=0);c++);v(c+37)}function v(a){if(m&&!l&&n&&(a=q(a),-1!==a)){var c=p(a);b.key_pressed(a,f.expected,f.challenges),null!==c&&(c.compare(f.expected)?s():r())}}if(!a)return!1;var e=this,f=null,g=0,h=3,i=0,j=!1,k=null,l=!1,m=!1,n=!1,o=[];e.start=function(){m&&!l&&(b.before_game(),f.new_round(),p(),n=!1,a.retrieve(f.raw,f.challenges,function(){a.tic(f.press_time),n=!0,clearTimeout(k),k=setTimeout(function(){return f.missable?r():(o.compare(f.expected)?s():r(),void 0)},f.press_time)}))},e.prepare=function(b,e,k){void 0===b&&(b=3),void 0===e&&(e=0),i=e,f=new DashLevel(k,c,d),a.prepare(),h=b,g=0,m=!0,j=!1},e.init=function(){var a=["before_game","after_game","best_score","lost_life","got_point","key_pressed"],c=a.length;void 0===b&&(b={});for(var d=0;c>d;d++){var f=a[d];void 0===b[f]&&(b[f]=function(){})}return window.addEventListener("focus",function(){l=!1,e.start()}),window.addEventListener("blur",function(){l=!0,clearTimeout(k)}),$("body").keydown(function(a){var b=a.keyCode;b>=37&&40>=b&&(a.preventDefault(),a.stopPropagation()),v(b)}),Hammer(document.getElementById("panel-0"),{recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_ALL,velocity:.2,threshold:10}]]}).on("swipeleft",function(a){u(a.type)}).on("swipeup",function(a){u(a.type)}).on("swiperight",function(a){u(a.type)}).on("swipedown",function(a){u(a.type)}),Hammer(document.getElementById("panel-1"),{recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_ALL,velocity:.2,threshold:10}]]}).on("swipeleft",function(a){u(a.type)}).on("swipeup",function(a){u(a.type)}).on("swiperight",function(a){u(a.type)}).on("swipedown",function(a){u(a.type)}),e}}}(window);