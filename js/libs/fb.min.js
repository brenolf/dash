window.fbAsyncInit=function(){function e(e){"connected"==e.status&&(FB.api("/me?fields=first_name,picture",function(e){var t=document.getElementById("user_name");t.innerHTML=e.first_name+", "}),FB.api("/me/scores",function(e){if(e&&!e.error){var t=0;void 0!==e.data&&void 0!==e.data[0]&&void 0!==e.data[0].score&&(t=e.data[0].score),BEST_SCORE=t,best.html(BEST_SCORE),store("best",BEST_SCORE),fb_update_score(BEST_SCORE)}}))}FB.init({appId:"903632352992329",xfbml:!0,version:"v2.2",cookie:!0}),window.fb_update_score=function(e){window.FB_LOGGED===!0&&FB.api("/me/scores","POST",{score:e},function(e){e.error&&console.log(e)})},window.fb_update_leaderboard=function(){if(window.FB_LOGGED===!0){$("#loading").toggle(!0),$("#no_leaderboard").toggle(!1);var e=$("#ranking").empty().empty();FB.api("/app/scores?fields=score,user.limit(40)",function(t){if($("#loading").toggle(!1),t&&!t.error){t=t.data;var o=t.length;0===o&&$("#error_msg").toggle(!0),1===o&&$("#app_permissions_alert").toggle(!0),$("#error_msg").toggle(!1),$("#app_permissions_alert").toggle(!1);for(var n=0;n<o;n++)e.append("<tr><td>"+(n+1)+'.</td><td><img src="https://graph.facebook.com/'+t[n].user.id+'/picture?type=square" alt="'+t[n].user.name+'"/></td><td>'+t[n].user.name+'</td><td style="text-align: center;">'+t[n].score+"</td></tr>")}else $("#no_leaderboard").toggle(!0)})}},window.fb_login=function(){FB.login(function(t){window.FB_LOGGED=!0,e(t),fb_update_leaderboard(),$("#btn_login").toggle(!1)},{scope:"user_friends, email, publish_actions"})},FB.getLoginStatus(function(t){$("#error_msg").toggle(!1),"connected"==t.status?(window.FB_LOGGED=!0,e(t)):$("#btn_login").toggle(!0)})},function(e,t,o){var n,r=e.getElementsByTagName(t)[0];e.getElementById(o)||(n=e.createElement(t),n.id=o,n.src="//connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(n,r))}(document,"script","facebook-jssdk");