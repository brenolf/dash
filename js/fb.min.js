window.fbAsyncInit=function(){function a(a){"connected"==a.status&&(FB.api("/me?fields=first_name,picture",function(a){var b=document.getElementById("user_name");b.innerHTML=a.first_name+", "}),FB.api("/me/scores",function(a){if(a&&!a.error){var b=0;void 0!==a.data&&void 0!==a.data[0]&&void 0!==a.data[0].score&&(b=a.data[0].score),b>BEST_SCORE?(BEST_SCORE=b,best.html(BEST_SCORE),store("best",BEST_SCORE)):BEST_SCORE>b&&fb_update_score(BEST_SCORE)}}),fb_update_leaderboard())}FB.init({appId:"903632352992329",xfbml:!0,version:"v2.2",cookie:!0}),window.fb_update_score=function(a){window.FB_LOGGED===!0&&FB.api("/me/scores","POST",{score:a},function(a){a.error&&console.log(a)})},window.fb_update_leaderboard=function(){window.FB_LOGGED===!0&&FB.api("/app/scores?fields=score,user.limit(40)",function(a){if($("#loading").hide(),a&&!a.error){a=a.data;var b=a.length,c=$("#ranking").empty();0===b&&$("#error_msg").toggle();for(var d=0;b>d;d++)c.append("<tr><td>"+(d+1)+".</td>"+'<td><img src="http://graph.facebook.com/'+a[d].user.id+'/picture?type=square" alt="'+a[d].user.name+'"/></td>'+"<td>"+a[d].user.name+"</td>"+'<td style="text-align: center;">'+a[d].score+"</td>"+"</tr>")}else $("#no_leaderboard").show()})},window.fb_login=function(){FB.login(function(b){window.FB_LOGGED=!0,a(b),$("#loading").toggle(),$("#btn_login").toggle(),fb_update_leaderboard()},{scope:"user_friends, email, publish_actions"})},FB.getLoginStatus(function(b){$("#error_msg").toggle(),"connected"==b.status?(window.FB_LOGGED=!0,a(b),$("#loading").toggle(),fb_update_leaderboard()):$("#btn_login").toggle()})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk");