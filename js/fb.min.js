window.fbAsyncInit=function(){function a(a){"connected"==a.status&&(FB.api("/me?fields=first_name,picture",function(a){var b=document.getElementById("user_name");b.innerHTML=a.first_name+", "}),FB.api("/me/scores",function(a){if(a&&!a.error){var b=0;void 0!==a.data&&void 0!==a.data[0]&&void 0!==a.data[0].score&&(b=a.data[0].score),BEST_SCORE=b,best.html(BEST_SCORE),store("best",BEST_SCORE),fb_update_score(BEST_SCORE)}}),fb_update_leaderboard())}FB.init({appId:"903632352992329",xfbml:!0,version:"v2.2",cookie:!0}),window.fb_update_score=function(a){window.FB_LOGGED===!0&&FB.api("/me/scores","POST",{score:a},function(a){a.error&&console.log(a)})},window.fb_update_leaderboard=function(){if(window.FB_LOGGED===!0){$("#loading").toggle(!0);var a=$("#ranking").empty().empty();FB.api("/app/scores?fields=score,user.limit(40)",function(b){if($("#loading").toggle(!1),b&&!b.error){b=b.data;var c=b.length;0===c&&$("#error_msg").toggle(!0),1===c&&$("#app_permissions_alert").toggle(!0),$("#error_msg").toggle(!1),$("#app_permissions_alert").toggle(!1);for(var d=0;c>d;d++)a.append("<tr><td>"+(d+1)+".</td>"+'<td><img src="https://graph.facebook.com/'+b[d].user.id+'/picture?type=square" alt="'+b[d].user.name+'"/></td>'+"<td>"+b[d].user.name+"</td>"+'<td style="text-align: center;">'+b[d].score+"</td>"+"</tr>")}else $("#no_leaderboard").show()})}},window.fb_login=function(){FB.login(function(b){window.FB_LOGGED=!0,a(b),$("#btn_login").toggle(!1)},{scope:"user_friends, email, publish_actions"})},FB.getLoginStatus(function(b){$("#error_msg").toggle(!1),"connected"==b.status?(window.FB_LOGGED=!0,a(b),fb_update_leaderboard()):$("#btn_login").toggle(!0)})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk");